{"ast":null,"code":"import { auth, provider, storage } from \"../firebase\";\nimport db from \"../firebase\";\nimport { SET_USER, SET_LOADING_STATUS } from \"./actionType\";\nexport const setUser = payload => ({\n  //setUser takes a payload\n  type: SET_USER,\n  user: payload // is setted to whatever the payload is\n\n});\nexport const setLoading = status => ({\n  type: SET_USER,\n  status: status // status is gonna be whatever was passed into status\n\n});\nexport function signInAPI() {\n  return dispatch => {\n    auth.signInWithPopup(provider).then(payload => {\n      dispatch(setUser(payload.user)); //payload is all of the user details -> dispatched to SET_USER\n    }).catch(error => alert(error.message));\n  };\n}\nexport function getUserAuth() {\n  return dispatch => {\n    auth.onAuthStateChanged(async user => {\n      if (user) {\n        dispatch(setUser(user));\n      }\n    });\n  };\n}\nexport function signOutAPI() {\n  return dispatch => {\n    auth.signOut().then(() => {\n      dispatch(setUser(null));\n    }).catch(error => {\n      console.log(error.message);\n    });\n  };\n}\nexport function postArticleAPI(payload) {\n  //is used to upload the image\n  return dispatch => {\n    dispatch(setLoading(true));\n\n    if (payload.image !== \"\") {\n      const upload = storage.ref(`images/${payload.image.name}`).put(payload.image); //payload is the contents/message of a action\n\n      upload.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100; //for making the loading bar\n\n        console.log(`Progress: ${progress}%`);\n\n        if (snapshot.state === \"RUNNING\") {\n          console.log(`Progress: ${progress}%`);\n        }\n      }, error => console.log(error.code), async () => {\n        const downloadURL = await upload.snapshot.ref.getDownloadURL();\n        db.collection(\"articles\").add({\n          actor: {\n            description: payload.user.email,\n            title: payload.user.displayName,\n            date: payload.timestamp,\n            image: payload.user.photoURL\n          },\n          video: payload.video,\n          sharedImg: downloadURL,\n          comments: 0,\n          description: payload.description\n        });\n      });\n    } else if (payload.video) {\n      db.collection(\"articles\").add({\n        actor: {\n          description: payload.user.email,\n          title: payload.user.displayName,\n          date: payload.timestamp,\n          image: payload.user.photoURL\n        },\n        video: payload.video,\n        sharedImg: \"\",\n        comments: 0,\n        description: payload.description\n      });\n      dispatch(setLoading(false));\n    }\n  };\n}","map":{"version":3,"sources":["C:/Users/Nutzer/Desktop/react/linkedin-clone/src/actions/index.js"],"names":["auth","provider","storage","db","SET_USER","SET_LOADING_STATUS","setUser","payload","type","user","setLoading","status","signInAPI","dispatch","signInWithPopup","then","catch","error","alert","message","getUserAuth","onAuthStateChanged","signOutAPI","signOut","console","log","postArticleAPI","image","upload","ref","name","put","on","snapshot","progress","bytesTransferred","totalBytes","state","code","downloadURL","getDownloadURL","collection","add","actor","description","email","title","displayName","date","timestamp","photoURL","video","sharedImg","comments"],"mappings":"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","sourcesContent":["import { auth, provider, storage } from \"../firebase\";\r\nimport db from \"../firebase\";\r\nimport { SET_USER, SET_LOADING_STATUS } from \"./actionType\";\r\n\r\nexport const setUser = (payload) => ({\r\n  //setUser takes a payload\r\n  type: SET_USER,\r\n  user: payload, // is setted to whatever the payload is\r\n});\r\n\r\nexport const setLoading = (status) => ({\r\n  type: SET_USER,\r\n  status: status, // status is gonna be whatever was passed into status\r\n});\r\n\r\nexport function signInAPI() {\r\n  return (dispatch) => {\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .then((payload) => {\r\n        dispatch(setUser(payload.user)); //payload is all of the user details -> dispatched to SET_USER\r\n      })\r\n      .catch((error) => alert(error.message));\r\n  };\r\n}\r\n\r\nexport function getUserAuth() {\r\n  return (dispatch) => {\r\n    auth.onAuthStateChanged(async (user) => {\r\n      if (user) {\r\n        dispatch(setUser(user));\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function signOutAPI() {\r\n  return (dispatch) => {\r\n    auth\r\n      .signOut()\r\n      .then(() => {\r\n        dispatch(setUser(null));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function postArticleAPI(payload) {\r\n  //is used to upload the image\r\n\r\n  return (dispatch) => {\r\n    dispatch(setLoading(true));\r\n    if (payload.image !== \"\") {\r\n      const upload = storage\r\n        .ref(`images/${payload.image.name}`)\r\n        .put(payload.image); //payload is the contents/message of a action\r\n      upload.on(\r\n        \"state_changed\",\r\n        (snapshot) => {\r\n          const progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100; //for making the loading bar\r\n\r\n          console.log(`Progress: ${progress}%`);\r\n          if (snapshot.state === \"RUNNING\") {\r\n            console.log(`Progress: ${progress}%`);\r\n          }\r\n        },\r\n        (error) => console.log(error.code),\r\n        async () => {\r\n          const downloadURL = await upload.snapshot.ref.getDownloadURL();\r\n          db.collection(\"articles\").add({\r\n            actor: {\r\n              description: payload.user.email,\r\n              title: payload.user.displayName,\r\n              date: payload.timestamp,\r\n              image: payload.user.photoURL,\r\n            },\r\n            video: payload.video,\r\n            sharedImg: downloadURL,\r\n            comments: 0,\r\n            description: payload.description,\r\n          });\r\n        }\r\n      );\r\n    } else if (payload.video) {\r\n      db.collection(\"articles\").add({\r\n        actor: {\r\n          description: payload.user.email,\r\n          title: payload.user.displayName,\r\n          date: payload.timestamp,\r\n          image: payload.user.photoURL,\r\n        },\r\n        video: payload.video,\r\n        sharedImg: \"\",\r\n        comments: 0,\r\n        description: payload.description,\r\n      });\r\n      dispatch(setLoading(false));\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}